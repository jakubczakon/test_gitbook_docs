<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>neptune.utils API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>neptune.utils</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#
# Copyright (c) 2019, Neptune Labs Sp. z o.o.
#
# Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import functools
import glob as globlib
import logging
import os
import sys
import time

import math
import numpy as np
import pandas as pd
import requests
from bravado.exception import BravadoConnectionError, BravadoTimeoutError, HTTPForbidden, \
    HTTPInternalServerError, HTTPServerError, HTTPUnauthorized, HTTPServiceUnavailable, HTTPRequestTimeout, \
    HTTPGatewayTimeout, HTTPBadGateway

from neptune.api_exceptions import ConnectionLost, Forbidden, ServerError, Unauthorized, SSLError
from neptune.exceptions import InvalidNotebookPath, FileNotFound, NotAFile
from neptune.git_info import GitInfo

_logger = logging.getLogger(__name__)

IS_WINDOWS = hasattr(sys, &#39;getwindowsversion&#39;)


def map_values(f_value, dictionary):
    return dict(
        (k, f_value(v)) for k, v in dictionary.items()
    )


def map_keys(f_key, dictionary):
    return dict(
        (f_key(k), v) for k, v in dictionary.items()
    )


def as_list(value):
    if value is None or isinstance(value, list):
        return value
    else:
        return [value]


def validate_notebook_path(path):
    if not path.endswith(&#34;.ipynb&#34;):
        raise InvalidNotebookPath(path)

    if not os.path.exists(path):
        raise FileNotFound(path)

    if not os.path.isfile(path):
        raise NotAFile(path)


def align_channels_on_x(dataframe):
    channel_dfs, common_x = _split_df_by_stems(dataframe)
    return merge_dataframes([common_x] + channel_dfs, on=&#39;x&#39;, how=&#39;outer&#39;)


def get_channel_name_stems(columns):
    return list(set([col[2:] for col in columns]))


def merge_dataframes(dataframes, on, how=&#39;outer&#39;):
    merged_df = functools.reduce(lambda left, right: \
                                     pd.merge(left, right, on=on, how=how), dataframes)
    return merged_df


def is_float(value):
    try:
        _ = float(value)
    except ValueError:
        return False
    else:
        return True


def is_nan_or_inf(value):
    return math.isnan(value) or math.isinf(value)


def file_contains(filename, text):
    for line in open(filename):
        if text in line:
            return True
    return False


def in_docker():
    cgroup_file = &#39;/proc/self/cgroup&#39;
    return os.path.exists(&#39;./dockerenv&#39;) or (os.path.exists(cgroup_file) and file_contains(cgroup_file, text=&#39;docker&#39;))


def is_notebook():
    try:
        # pylint: disable=pointless-statement,undefined-variable
        get_ipython
        return True
    except Exception:
        return False


def _split_df_by_stems(df):
    channel_dfs, x_vals = [], []
    for stem in get_channel_name_stems(df.columns):
        channel_df = df[[&#39;x_{}&#39;.format(stem), &#39;y_{}&#39;.format(stem)]]
        channel_df.columns = [&#39;x&#39;, stem]
        channel_df = channel_df.dropna()
        channel_dfs.append(channel_df)
        x_vals.extend(channel_df[&#39;x&#39;].tolist())
    common_x = pd.DataFrame({&#39;x&#39;: np.unique(x_vals)}, dtype=float)
    return channel_dfs, common_x


def discover_git_repo_location():
    # pylint:disable=bad-option-value,import-outside-toplevel
    import __main__

    if hasattr(__main__, &#39;__file__&#39;):
        return os.path.dirname(os.path.abspath(__main__.__file__))
    return None


def update_session_proxies(session, proxies):
    if proxies is not None:
        try:
            session.proxies.update(proxies)
        except (TypeError, ValueError):
            raise ValueError(&#34;Wrong proxies format: {}&#34;.format(proxies))


def get_git_info(repo_path=None):
    &#34;&#34;&#34;Retrieve information about git repository.

    If attempt fails, ``None`` will be returned.

    Args:
        repo_path (:obj:`str`, optional, default is ``None``):

            | Path to the repository from which extract information about git.
            | If ``None`` is passed, calling ``get_git_info`` is equivalent to calling
              ``git.Repo(search_parent_directories=True)``.
              Check `GitPython &lt;https://gitpython.readthedocs.io/en/stable/reference.html#git.repo.base.Repo&gt;`_
              docs for more information.

    Returns:
        :class:`~neptune.git_info.GitInfo` - An object representing information about git repository.

    Examples:

        .. code:: python3

            # Get git info from the current directory
            git_info = get_git_info(&#39;.&#39;)

    &#34;&#34;&#34;
    try:
        # pylint:disable=bad-option-value,import-outside-toplevel
        import git

        repo = git.Repo(repo_path, search_parent_directories=True)

        commit = repo.head.commit

        active_branch = &#34;&#34;

        try:
            active_branch = repo.active_branch.name
        except TypeError as e:
            if str(e.args[0]).startswith(&#34;HEAD is a detached symbolic reference as it points to&#34;):
                active_branch = &#34;Detached HEAD&#34;

        remote_urls = [remote.url for remote in repo.remotes]

        return GitInfo(
            commit_id=commit.hexsha,
            message=commit.message,
            author_name=commit.author.name,
            author_email=commit.author.email,
            commit_date=commit.committed_datetime,
            repository_dirty=repo.is_dirty(untracked_files=True),
            active_branch=active_branch,
            remote_urls=remote_urls
        )
    except:  # pylint: disable=bare-except
        return None


def with_api_exceptions_handler(func):
    def wrapper(*args, **kwargs):
        for retry in range(0, 11):
            try:
                return func(*args, **kwargs)
            except requests.exceptions.SSLError:
                raise SSLError()
            except (BravadoConnectionError, BravadoTimeoutError,
                    requests.exceptions.ConnectionError, requests.exceptions.Timeout,
                    HTTPRequestTimeout, HTTPServiceUnavailable, HTTPGatewayTimeout, HTTPBadGateway):
                if retry &gt;= 6:
                    _logger.warning(&#39;Experiencing connection interruptions. Reestablishing communication with Neptune.&#39;)
                time.sleep(2 ** retry)
                continue
            except HTTPServerError:
                raise ServerError()
            except HTTPUnauthorized:
                raise Unauthorized()
            except HTTPForbidden:
                raise Forbidden()
            except requests.exceptions.RequestException as e:
                if e.response is None:
                    raise
                status_code = e.response.status_code
                if status_code in (
                        HTTPBadGateway.status_code,
                        HTTPServiceUnavailable.status_code,
                        HTTPGatewayTimeout.status_code):
                    if retry &gt;= 6:
                        _logger.warning(
                            &#39;Experiencing connection interruptions. Reestablishing communication with Neptune.&#39;)
                    time.sleep(2 ** retry)
                    continue
                elif status_code &gt;= HTTPInternalServerError.status_code:
                    raise ServerError()
                elif status_code == HTTPUnauthorized.status_code:
                    raise Unauthorized()
                elif status_code == HTTPForbidden.status_code:
                    raise Forbidden()
                else:
                    raise
        raise ConnectionLost()

    return wrapper


def glob(pathname):
    # pylint: disable=unexpected-keyword-arg
    if sys.version_info.major &lt; 3 or (sys.version_info.major == 3 and sys.version_info.minor &lt; 5):
        return globlib.glob(pathname)
    else:
        return globlib.glob(pathname, recursive=True)


def is_ipython():
    try:
        # pylint:disable=bad-option-value,import-outside-toplevel
        import IPython
        ipython = IPython.core.getipython.get_ipython()
        return ipython is not None
    except ImportError:
        return False</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="neptune.utils.align_channels_on_x"><code class="name flex">
<span>def <span class="ident">align_channels_on_x</span></span>(<span>dataframe)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def align_channels_on_x(dataframe):
    channel_dfs, common_x = _split_df_by_stems(dataframe)
    return merge_dataframes([common_x] + channel_dfs, on=&#39;x&#39;, how=&#39;outer&#39;)</code></pre>
</details>
</dd>
<dt id="neptune.utils.as_list"><code class="name flex">
<span>def <span class="ident">as_list</span></span>(<span>value)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def as_list(value):
    if value is None or isinstance(value, list):
        return value
    else:
        return [value]</code></pre>
</details>
</dd>
<dt id="neptune.utils.discover_git_repo_location"><code class="name flex">
<span>def <span class="ident">discover_git_repo_location</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def discover_git_repo_location():
    # pylint:disable=bad-option-value,import-outside-toplevel
    import __main__

    if hasattr(__main__, &#39;__file__&#39;):
        return os.path.dirname(os.path.abspath(__main__.__file__))
    return None</code></pre>
</details>
</dd>
<dt id="neptune.utils.file_contains"><code class="name flex">
<span>def <span class="ident">file_contains</span></span>(<span>filename, text)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def file_contains(filename, text):
    for line in open(filename):
        if text in line:
            return True
    return False</code></pre>
</details>
</dd>
<dt id="neptune.utils.get_channel_name_stems"><code class="name flex">
<span>def <span class="ident">get_channel_name_stems</span></span>(<span>columns)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_channel_name_stems(columns):
    return list(set([col[2:] for col in columns]))</code></pre>
</details>
</dd>
<dt id="neptune.utils.get_git_info"><code class="name flex">
<span>def <span class="ident">get_git_info</span></span>(<span>repo_path=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Retrieve information about git repository.</p>
<p>If attempt fails, <code>None</code> will be returned.</p>
<h2 id="args">Args</h2>
<p>repo_path (:obj:<code>str</code>, optional, default is <code>None</code>):</p>
<pre><code>| Path to the repository from which extract information about git.
| If &lt;code&gt;None&lt;/code&gt; is passed, calling &lt;code&gt;&lt;a title="neptune.utils.get_git_info" href="#neptune.utils.get_git_info"&gt;get\_git\_info()&lt;/a&gt;&lt;/code&gt; is equivalent to calling
  ``git.Repo(search_parent_directories=True)``.
  Check `GitPython &lt;https://gitpython.readthedocs.io/en/stable/reference.html#git.repo.base.Repo&gt;`_
  docs for more information.
</code></pre>
<h2 id="returns">Returns</h2>
<p>:class:<code>~neptune.git_info.GitInfo</code> - An object representing information about git repository.</p>
<h2 id="examples">Examples</h2>
<div class="admonition code">
<p class="admonition-title">Code:&ensp;python3</p>
<h1 id="get-git-info-from-the-current-directory">Get git info from the current directory</h1>
<p>git_info = get_git_info('.')</p>
</div></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_git_info(repo_path=None):
    &#34;&#34;&#34;Retrieve information about git repository.

    If attempt fails, ``None`` will be returned.

    Args:
        repo_path (:obj:`str`, optional, default is ``None``):

            | Path to the repository from which extract information about git.
            | If ``None`` is passed, calling ``get_git_info`` is equivalent to calling
              ``git.Repo(search_parent_directories=True)``.
              Check `GitPython &lt;https://gitpython.readthedocs.io/en/stable/reference.html#git.repo.base.Repo&gt;`_
              docs for more information.

    Returns:
        :class:`~neptune.git_info.GitInfo` - An object representing information about git repository.

    Examples:

        .. code:: python3

            # Get git info from the current directory
            git_info = get_git_info(&#39;.&#39;)

    &#34;&#34;&#34;
    try:
        # pylint:disable=bad-option-value,import-outside-toplevel
        import git

        repo = git.Repo(repo_path, search_parent_directories=True)

        commit = repo.head.commit

        active_branch = &#34;&#34;

        try:
            active_branch = repo.active_branch.name
        except TypeError as e:
            if str(e.args[0]).startswith(&#34;HEAD is a detached symbolic reference as it points to&#34;):
                active_branch = &#34;Detached HEAD&#34;

        remote_urls = [remote.url for remote in repo.remotes]

        return GitInfo(
            commit_id=commit.hexsha,
            message=commit.message,
            author_name=commit.author.name,
            author_email=commit.author.email,
            commit_date=commit.committed_datetime,
            repository_dirty=repo.is_dirty(untracked_files=True),
            active_branch=active_branch,
            remote_urls=remote_urls
        )
    except:  # pylint: disable=bare-except
        return None</code></pre>
</details>
</dd>
<dt id="neptune.utils.glob"><code class="name flex">
<span>def <span class="ident">glob</span></span>(<span>pathname)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def glob(pathname):
    # pylint: disable=unexpected-keyword-arg
    if sys.version_info.major &lt; 3 or (sys.version_info.major == 3 and sys.version_info.minor &lt; 5):
        return globlib.glob(pathname)
    else:
        return globlib.glob(pathname, recursive=True)</code></pre>
</details>
</dd>
<dt id="neptune.utils.in_docker"><code class="name flex">
<span>def <span class="ident">in_docker</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def in_docker():
    cgroup_file = &#39;/proc/self/cgroup&#39;
    return os.path.exists(&#39;./dockerenv&#39;) or (os.path.exists(cgroup_file) and file_contains(cgroup_file, text=&#39;docker&#39;))</code></pre>
</details>
</dd>
<dt id="neptune.utils.is_float"><code class="name flex">
<span>def <span class="ident">is_float</span></span>(<span>value)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_float(value):
    try:
        _ = float(value)
    except ValueError:
        return False
    else:
        return True</code></pre>
</details>
</dd>
<dt id="neptune.utils.is_ipython"><code class="name flex">
<span>def <span class="ident">is_ipython</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_ipython():
    try:
        # pylint:disable=bad-option-value,import-outside-toplevel
        import IPython
        ipython = IPython.core.getipython.get_ipython()
        return ipython is not None
    except ImportError:
        return False</code></pre>
</details>
</dd>
<dt id="neptune.utils.is_nan_or_inf"><code class="name flex">
<span>def <span class="ident">is_nan_or_inf</span></span>(<span>value)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_nan_or_inf(value):
    return math.isnan(value) or math.isinf(value)</code></pre>
</details>
</dd>
<dt id="neptune.utils.is_notebook"><code class="name flex">
<span>def <span class="ident">is_notebook</span></span>(<span>)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def is_notebook():
    try:
        # pylint: disable=pointless-statement,undefined-variable
        get_ipython
        return True
    except Exception:
        return False</code></pre>
</details>
</dd>
<dt id="neptune.utils.map_keys"><code class="name flex">
<span>def <span class="ident">map_keys</span></span>(<span>f_key, dictionary)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map_keys(f_key, dictionary):
    return dict(
        (f_key(k), v) for k, v in dictionary.items()
    )</code></pre>
</details>
</dd>
<dt id="neptune.utils.map_values"><code class="name flex">
<span>def <span class="ident">map_values</span></span>(<span>f_value, dictionary)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def map_values(f_value, dictionary):
    return dict(
        (k, f_value(v)) for k, v in dictionary.items()
    )</code></pre>
</details>
</dd>
<dt id="neptune.utils.merge_dataframes"><code class="name flex">
<span>def <span class="ident">merge_dataframes</span></span>(<span>dataframes, on, how='outer')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def merge_dataframes(dataframes, on, how=&#39;outer&#39;):
    merged_df = functools.reduce(lambda left, right: \
                                     pd.merge(left, right, on=on, how=how), dataframes)
    return merged_df</code></pre>
</details>
</dd>
<dt id="neptune.utils.update_session_proxies"><code class="name flex">
<span>def <span class="ident">update_session_proxies</span></span>(<span>session, proxies)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def update_session_proxies(session, proxies):
    if proxies is not None:
        try:
            session.proxies.update(proxies)
        except (TypeError, ValueError):
            raise ValueError(&#34;Wrong proxies format: {}&#34;.format(proxies))</code></pre>
</details>
</dd>
<dt id="neptune.utils.validate_notebook_path"><code class="name flex">
<span>def <span class="ident">validate_notebook_path</span></span>(<span>path)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def validate_notebook_path(path):
    if not path.endswith(&#34;.ipynb&#34;):
        raise InvalidNotebookPath(path)

    if not os.path.exists(path):
        raise FileNotFound(path)

    if not os.path.isfile(path):
        raise NotAFile(path)</code></pre>
</details>
</dd>
<dt id="neptune.utils.with_api_exceptions_handler"><code class="name flex">
<span>def <span class="ident">with_api_exceptions_handler</span></span>(<span>func)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def with_api_exceptions_handler(func):
    def wrapper(*args, **kwargs):
        for retry in range(0, 11):
            try:
                return func(*args, **kwargs)
            except requests.exceptions.SSLError:
                raise SSLError()
            except (BravadoConnectionError, BravadoTimeoutError,
                    requests.exceptions.ConnectionError, requests.exceptions.Timeout,
                    HTTPRequestTimeout, HTTPServiceUnavailable, HTTPGatewayTimeout, HTTPBadGateway):
                if retry &gt;= 6:
                    _logger.warning(&#39;Experiencing connection interruptions. Reestablishing communication with Neptune.&#39;)
                time.sleep(2 ** retry)
                continue
            except HTTPServerError:
                raise ServerError()
            except HTTPUnauthorized:
                raise Unauthorized()
            except HTTPForbidden:
                raise Forbidden()
            except requests.exceptions.RequestException as e:
                if e.response is None:
                    raise
                status_code = e.response.status_code
                if status_code in (
                        HTTPBadGateway.status_code,
                        HTTPServiceUnavailable.status_code,
                        HTTPGatewayTimeout.status_code):
                    if retry &gt;= 6:
                        _logger.warning(
                            &#39;Experiencing connection interruptions. Reestablishing communication with Neptune.&#39;)
                    time.sleep(2 ** retry)
                    continue
                elif status_code &gt;= HTTPInternalServerError.status_code:
                    raise ServerError()
                elif status_code == HTTPUnauthorized.status_code:
                    raise Unauthorized()
                elif status_code == HTTPForbidden.status_code:
                    raise Forbidden()
                else:
                    raise
        raise ConnectionLost()

    return wrapper</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="neptune" href="index.html">neptune</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="neptune.utils.align_channels_on_x" href="#neptune.utils.align_channels_on_x">align_channels_on_x</a></code></li>
<li><code><a title="neptune.utils.as_list" href="#neptune.utils.as_list">as_list</a></code></li>
<li><code><a title="neptune.utils.discover_git_repo_location" href="#neptune.utils.discover_git_repo_location">discover_git_repo_location</a></code></li>
<li><code><a title="neptune.utils.file_contains" href="#neptune.utils.file_contains">file_contains</a></code></li>
<li><code><a title="neptune.utils.get_channel_name_stems" href="#neptune.utils.get_channel_name_stems">get_channel_name_stems</a></code></li>
<li><code><a title="neptune.utils.get_git_info" href="#neptune.utils.get_git_info">get_git_info</a></code></li>
<li><code><a title="neptune.utils.glob" href="#neptune.utils.glob">glob</a></code></li>
<li><code><a title="neptune.utils.in_docker" href="#neptune.utils.in_docker">in_docker</a></code></li>
<li><code><a title="neptune.utils.is_float" href="#neptune.utils.is_float">is_float</a></code></li>
<li><code><a title="neptune.utils.is_ipython" href="#neptune.utils.is_ipython">is_ipython</a></code></li>
<li><code><a title="neptune.utils.is_nan_or_inf" href="#neptune.utils.is_nan_or_inf">is_nan_or_inf</a></code></li>
<li><code><a title="neptune.utils.is_notebook" href="#neptune.utils.is_notebook">is_notebook</a></code></li>
<li><code><a title="neptune.utils.map_keys" href="#neptune.utils.map_keys">map_keys</a></code></li>
<li><code><a title="neptune.utils.map_values" href="#neptune.utils.map_values">map_values</a></code></li>
<li><code><a title="neptune.utils.merge_dataframes" href="#neptune.utils.merge_dataframes">merge_dataframes</a></code></li>
<li><code><a title="neptune.utils.update_session_proxies" href="#neptune.utils.update_session_proxies">update_session_proxies</a></code></li>
<li><code><a title="neptune.utils.validate_notebook_path" href="#neptune.utils.validate_notebook_path">validate_notebook_path</a></code></li>
<li><code><a title="neptune.utils.with_api_exceptions_handler" href="#neptune.utils.with_api_exceptions_handler">with_api_exceptions_handler</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>