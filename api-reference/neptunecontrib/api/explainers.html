<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>neptunecontrib.api.explainers API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>neptunecontrib.api.explainers</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#
# Copyright (c) 2020, Neptune Labs Sp. z o.o.
#
# Licensed under the Apache License, Version 2.0 (the &#34;License&#34;);
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an &#34;AS IS&#34; BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#

import neptune

from neptunecontrib.api import log_chart

__all__ = [
    &#39;log_explainer&#39;,
    &#39;log_local_explanations&#39;,
    &#39;log_global_explanations&#39;
]


def log_explainer(filename, explainer, experiment=None):
    &#34;&#34;&#34;Logs dalex explainer to Neptune.

    Dalex explainer is pickled and logged to Neptune.

    Args:
        filename (:obj:`str`): filename that will be used as an artifact&#39;s destination.
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)

            log_explainer(&#39;explainer.pkl&#39;, expl)

    Note:
        Check out how the logged explainer looks in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    _exp.log_artifact(export_dalex_explainer(explainer), filename)


def export_dalex_explainer(explainer):
    from io import BytesIO

    buffer = BytesIO()
    explainer.dump(buffer)
    buffer.seek(0)

    return buffer


def log_local_explanations(explainer, observation, experiment=None):
    &#34;&#34;&#34;Logs local explanations from dalex to Neptune.

    Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
    as an artifact with path charts/{name}.html.

    The following explanations are logged: break down, break down with interactions, shap, ceteris paribus,
    and ceteris paribus for categorical variables. Explanation charts are created and logged with default settings.
    To log charts with custom settings, create a custom chart and use `neptunecontrib.api.log_chart`.
    For more information about Dalex go to `Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;`_.

    Args:
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        observation (:obj): an observation that can be fed to the classifier for which the explainer was created
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)

            new_observation = pd.DataFrame({&#39;gender&#39;: [&#39;male&#39;],
                                            &#39;age&#39;: [25],
                                            &#39;class&#39;: [&#39;1st&#39;],
                                            &#39;embarked&#39;: [&#39;Southampton&#39;],
                                            &#39;fare&#39;: [72],
                                            &#39;sibsp&#39;: [0],
                                            &#39;parch&#39;: 0},
                                           index=[&#39;John&#39;])

            log_local_explanations(expl, new_observation)

    Note:
        Check out how the logged explanations look in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    bd = explainer.predict_parts(observation, type=&#39;break_down&#39;)
    bd_interactions = explainer.predict_parts(observation, type=&#39;break_down_interactions&#39;)
    sh = explainer.predict_parts(observation, type=&#39;shap&#39;)
    cp = explainer.predict_profile(observation)

    bd_plot = bd.plot(show=False)
    log_chart(name=&#39;Break Down&#39;, chart=bd_plot, experiment=_exp)

    bd_interactions_plot = bd_interactions.plot(show=False)
    log_chart(name=&#39;Break Down Interactions&#39;, chart=bd_interactions_plot, experiment=_exp)

    sh_plot = sh.plot(show=False)
    log_chart(name=&#39;SHAP&#39;, chart=sh_plot, experiment=_exp)

    cp_plot = cp.plot(show=False)
    log_chart(name=&#34;Ceteris Paribus&#34;, chart=cp_plot, experiment=_exp)

    cp_plot_cat = cp.plot(variable_type=&#34;categorical&#34;, show=False)
    log_chart(name=&#34;Ceteris Paribus Categorical&#34;, chart=cp_plot_cat, experiment=_exp)


def log_global_explanations(explainer, categorical_features=None, numerical_features=None, experiment=None):
    &#34;&#34;&#34;Logs global explanations from dalex to Neptune.

    Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
    as an artifact with path charts/{name}.html.

    The following explanations are logged: variable importance. If categorical features are specified partial dependence
    and accumulated dependence are also logged. Explanation charts are created and logged with default settings.
    To log charts with custom settings, create a custom chart and use `neptunecontrib.api.log_chart`.
    For more information about Dalex go to `Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;`_.

    Args:
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        categorical_features (:list): list of categorical features for which you want to create
            accumulated dependence plots.
        numerical_features (:list): list of numerical features for which you want to create
            partial dependence plots.
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)
            log_global_explanations(expl, categorical_features=[&#34;gender&#34;, &#34;class&#34;], numerical_features=[&#34;age&#34;, &#34;fare&#34;])

    Note:
        Check out how the logged explanations look in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    vi = explainer.model_parts()

    vi_plot = vi.plot(show=False)
    log_chart(name=&#34;Variable Importance&#34;, chart=vi_plot, experiment=_exp)

    if numerical_features:
        pdp_num = explainer.model_profile(type=&#39;partial&#39;, variables=numerical_features)
        pdp_num.result[&#34;_label_&#34;] = &#39;pdp&#39;

        ale_num = explainer.model_profile(type=&#39;accumulated&#39;, variables=numerical_features)
        ale_num.result[&#34;_label_&#34;] = &#39;ale&#39;

        pdp_num_plot = pdp_num.plot(ale_num, show=False)
        log_chart(name=&#34;Partial Dependence&#34;, chart=pdp_num_plot, experiment=_exp)

    if categorical_features:
        pdp_cat = explainer.model_profile(type=&#39;partial&#39;, variable_type=&#39;categorical&#39;, variables=categorical_features)
        pdp_cat.result[&#39;_label_&#39;] = &#39;pdp&#39;

        ale_cat = explainer.model_profile(type=&#39;accumulated&#39;, variable_type=&#39;categorical&#39;,
                                          variables=categorical_features)
        ale_cat.result[&#39;_label_&#39;] = &#39;ale&#39;

        ale_cat_plot = ale_cat.plot(pdp_cat, show=False)
        log_chart(name=&#34;Accumulated Dependence&#34;, chart=ale_cat_plot, experiment=_exp)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="neptunecontrib.api.explainers.log_explainer"><code class="name flex">
<span>def <span class="ident">log_explainer</span></span>(<span>filename, explainer, experiment=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Logs dalex explainer to Neptune.</p>
<p>Dalex explainer is pickled and logged to Neptune.</p>
<h2 id="args">Args</h2>
<p>filename (:obj:<code>str</code>): filename that will be used as an artifact's destination.
explainer (:obj:<code>dalex.Explainer</code>): an instance of dalex explainer
experiment (:obj:<code>neptune.experiments.Experiment</code>, optional, default is <code>None</code>):
| For advanced users only. Pass Neptune
<code>Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;</code>_
object if you want to control to which experiment data is logged.
| If <code>None</code>, log to currently active, and most recent experiment.</p>
<h2 id="examples">Examples</h2>
<p>Start an experiment::</p>
<pre><code>import neptune

neptune.init(api_token='ANONYMOUS',
             project_qualified_name='shared/dalex-integration')
neptune.create_experiment(name='logging explanations')
</code></pre>
<p>Train your model and create dalex explainer::</p>
<pre><code>...
clf.fit(X, y)

expl = dx.Explainer(clf, X, y, label="Titanic MLP Pipeline")

log_explainer('explainer.pkl', expl)
</code></pre>
<h2 id="note">Note</h2>
<p>Check out how the logged explainer looks in Neptune:
<code>example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts&gt;</code>_</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def log_explainer(filename, explainer, experiment=None):
    &#34;&#34;&#34;Logs dalex explainer to Neptune.

    Dalex explainer is pickled and logged to Neptune.

    Args:
        filename (:obj:`str`): filename that will be used as an artifact&#39;s destination.
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)

            log_explainer(&#39;explainer.pkl&#39;, expl)

    Note:
        Check out how the logged explainer looks in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    _exp.log_artifact(export_dalex_explainer(explainer), filename)</code></pre>
</details>
</dd>
<dt id="neptunecontrib.api.explainers.log_global_explanations"><code class="name flex">
<span>def <span class="ident">log_global_explanations</span></span>(<span>explainer, categorical_features=None, numerical_features=None, experiment=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Logs global explanations from dalex to Neptune.</p>
<p>Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
as an artifact with path charts/{name}.html.</p>
<p>The following explanations are logged: variable importance. If categorical features are specified partial dependence
and accumulated dependence are also logged. Explanation charts are created and logged with default settings.
To log charts with custom settings, create a custom chart and use <code><a title="neptunecontrib.api.log_chart" href="index.html#neptunecontrib.api.log_chart">log_chart()</a></code>.
For more information about Dalex go to <code>Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;</code>_.</p>
<h2 id="args">Args</h2>
<p>explainer (:obj:<code>dalex.Explainer</code>): an instance of dalex explainer
categorical_features (:list): list of categorical features for which you want to create
accumulated dependence plots.
numerical_features (:list): list of numerical features for which you want to create
partial dependence plots.
experiment (:obj:<code>neptune.experiments.Experiment</code>, optional, default is <code>None</code>):
| For advanced users only. Pass Neptune
<code>Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;</code>_
object if you want to control to which experiment data is logged.
| If <code>None</code>, log to currently active, and most recent experiment.</p>
<h2 id="examples">Examples</h2>
<p>Start an experiment::</p>
<pre><code>import neptune

neptune.init(api_token='ANONYMOUS',
             project_qualified_name='shared/dalex-integration')
neptune.create_experiment(name='logging explanations')
</code></pre>
<p>Train your model and create dalex explainer::</p>
<pre><code>...
clf.fit(X, y)

expl = dx.Explainer(clf, X, y, label="Titanic MLP Pipeline")
log_global_explanations(expl, categorical_features=["gender", "class"], numerical_features=["age", "fare"])
</code></pre>
<h2 id="note">Note</h2>
<p>Check out how the logged explanations look in Neptune:
<code>example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;</code>_</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def log_global_explanations(explainer, categorical_features=None, numerical_features=None, experiment=None):
    &#34;&#34;&#34;Logs global explanations from dalex to Neptune.

    Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
    as an artifact with path charts/{name}.html.

    The following explanations are logged: variable importance. If categorical features are specified partial dependence
    and accumulated dependence are also logged. Explanation charts are created and logged with default settings.
    To log charts with custom settings, create a custom chart and use `neptunecontrib.api.log_chart`.
    For more information about Dalex go to `Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;`_.

    Args:
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        categorical_features (:list): list of categorical features for which you want to create
            accumulated dependence plots.
        numerical_features (:list): list of numerical features for which you want to create
            partial dependence plots.
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)
            log_global_explanations(expl, categorical_features=[&#34;gender&#34;, &#34;class&#34;], numerical_features=[&#34;age&#34;, &#34;fare&#34;])

    Note:
        Check out how the logged explanations look in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    vi = explainer.model_parts()

    vi_plot = vi.plot(show=False)
    log_chart(name=&#34;Variable Importance&#34;, chart=vi_plot, experiment=_exp)

    if numerical_features:
        pdp_num = explainer.model_profile(type=&#39;partial&#39;, variables=numerical_features)
        pdp_num.result[&#34;_label_&#34;] = &#39;pdp&#39;

        ale_num = explainer.model_profile(type=&#39;accumulated&#39;, variables=numerical_features)
        ale_num.result[&#34;_label_&#34;] = &#39;ale&#39;

        pdp_num_plot = pdp_num.plot(ale_num, show=False)
        log_chart(name=&#34;Partial Dependence&#34;, chart=pdp_num_plot, experiment=_exp)

    if categorical_features:
        pdp_cat = explainer.model_profile(type=&#39;partial&#39;, variable_type=&#39;categorical&#39;, variables=categorical_features)
        pdp_cat.result[&#39;_label_&#39;] = &#39;pdp&#39;

        ale_cat = explainer.model_profile(type=&#39;accumulated&#39;, variable_type=&#39;categorical&#39;,
                                          variables=categorical_features)
        ale_cat.result[&#39;_label_&#39;] = &#39;ale&#39;

        ale_cat_plot = ale_cat.plot(pdp_cat, show=False)
        log_chart(name=&#34;Accumulated Dependence&#34;, chart=ale_cat_plot, experiment=_exp)</code></pre>
</details>
</dd>
<dt id="neptunecontrib.api.explainers.log_local_explanations"><code class="name flex">
<span>def <span class="ident">log_local_explanations</span></span>(<span>explainer, observation, experiment=None)</span>
</code></dt>
<dd>
<div class="desc"><p>Logs local explanations from dalex to Neptune.</p>
<p>Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
as an artifact with path charts/{name}.html.</p>
<p>The following explanations are logged: break down, break down with interactions, shap, ceteris paribus,
and ceteris paribus for categorical variables. Explanation charts are created and logged with default settings.
To log charts with custom settings, create a custom chart and use <code><a title="neptunecontrib.api.log_chart" href="index.html#neptunecontrib.api.log_chart">log_chart()</a></code>.
For more information about Dalex go to <code>Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;</code>_.</p>
<h2 id="args">Args</h2>
<p>explainer (:obj:<code>dalex.Explainer</code>): an instance of dalex explainer
observation (:obj): an observation that can be fed to the classifier for which the explainer was created
experiment (:obj:<code>neptune.experiments.Experiment</code>, optional, default is <code>None</code>):
| For advanced users only. Pass Neptune
<code>Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;</code>_
object if you want to control to which experiment data is logged.
| If <code>None</code>, log to currently active, and most recent experiment.</p>
<h2 id="examples">Examples</h2>
<p>Start an experiment::</p>
<pre><code>import neptune

neptune.init(api_token='ANONYMOUS',
             project_qualified_name='shared/dalex-integration')
neptune.create_experiment(name='logging explanations')
</code></pre>
<p>Train your model and create dalex explainer::</p>
<pre><code>...
clf.fit(X, y)

expl = dx.Explainer(clf, X, y, label="Titanic MLP Pipeline")

new_observation = pd.DataFrame({'gender': ['male'],
                                'age': [25],
                                'class': ['1st'],
                                'embarked': ['Southampton'],
                                'fare': [72],
                                'sibsp': [0],
                                'parch': 0},
                               index=['John'])

log_local_explanations(expl, new_observation)
</code></pre>
<h2 id="note">Note</h2>
<p>Check out how the logged explanations look in Neptune:
<code>example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;</code>_</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def log_local_explanations(explainer, observation, experiment=None):
    &#34;&#34;&#34;Logs local explanations from dalex to Neptune.

    Dalex explanations are converted to interactive HTML objects and then uploaded to Neptune
    as an artifact with path charts/{name}.html.

    The following explanations are logged: break down, break down with interactions, shap, ceteris paribus,
    and ceteris paribus for categorical variables. Explanation charts are created and logged with default settings.
    To log charts with custom settings, create a custom chart and use `neptunecontrib.api.log_chart`.
    For more information about Dalex go to `Dalex Website &lt;https://modeloriented.github.io/DALEX/&gt;`_.

    Args:
        explainer (:obj:`dalex.Explainer`): an instance of dalex explainer
        observation (:obj): an observation that can be fed to the classifier for which the explainer was created
        experiment (:obj:`neptune.experiments.Experiment`, optional, default is ``None``):
            | For advanced users only. Pass Neptune
              `Experiment &lt;https://docs.neptune.ai/neptune-client/docs/experiment.html#neptune.experiments.Experiment&gt;`_
              object if you want to control to which experiment data is logged.
            | If ``None``, log to currently active, and most recent experiment.

    Examples:
        Start an experiment::

            import neptune

            neptune.init(api_token=&#39;ANONYMOUS&#39;,
                         project_qualified_name=&#39;shared/dalex-integration&#39;)
            neptune.create_experiment(name=&#39;logging explanations&#39;)

        Train your model and create dalex explainer::

            ...
            clf.fit(X, y)

            expl = dx.Explainer(clf, X, y, label=&#34;Titanic MLP Pipeline&#34;)

            new_observation = pd.DataFrame({&#39;gender&#39;: [&#39;male&#39;],
                                            &#39;age&#39;: [25],
                                            &#39;class&#39;: [&#39;1st&#39;],
                                            &#39;embarked&#39;: [&#39;Southampton&#39;],
                                            &#39;fare&#39;: [72],
                                            &#39;sibsp&#39;: [0],
                                            &#39;parch&#39;: 0},
                                           index=[&#39;John&#39;])

            log_local_explanations(expl, new_observation)

    Note:
        Check out how the logged explanations look in Neptune:
        `example experiment &lt;https://ui.neptune.ai/o/shared/org/dalex-integration/e/DAL-48/artifacts?path=charts%2F&gt;`_
     &#34;&#34;&#34;
    _exp = experiment if experiment else neptune

    bd = explainer.predict_parts(observation, type=&#39;break_down&#39;)
    bd_interactions = explainer.predict_parts(observation, type=&#39;break_down_interactions&#39;)
    sh = explainer.predict_parts(observation, type=&#39;shap&#39;)
    cp = explainer.predict_profile(observation)

    bd_plot = bd.plot(show=False)
    log_chart(name=&#39;Break Down&#39;, chart=bd_plot, experiment=_exp)

    bd_interactions_plot = bd_interactions.plot(show=False)
    log_chart(name=&#39;Break Down Interactions&#39;, chart=bd_interactions_plot, experiment=_exp)

    sh_plot = sh.plot(show=False)
    log_chart(name=&#39;SHAP&#39;, chart=sh_plot, experiment=_exp)

    cp_plot = cp.plot(show=False)
    log_chart(name=&#34;Ceteris Paribus&#34;, chart=cp_plot, experiment=_exp)

    cp_plot_cat = cp.plot(variable_type=&#34;categorical&#34;, show=False)
    log_chart(name=&#34;Ceteris Paribus Categorical&#34;, chart=cp_plot_cat, experiment=_exp)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="neptunecontrib.api" href="index.html">neptunecontrib.api</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="neptunecontrib.api.explainers.log_explainer" href="#neptunecontrib.api.explainers.log_explainer">log_explainer</a></code></li>
<li><code><a title="neptunecontrib.api.explainers.log_global_explanations" href="#neptunecontrib.api.explainers.log_global_explanations">log_global_explanations</a></code></li>
<li><code><a title="neptunecontrib.api.explainers.log_local_explanations" href="#neptunecontrib.api.explainers.log_local_explanations">log_local_explanations</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>